<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Technology Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6 font-sans">

  <!-- Filters -->
  <div class="flex flex-wrap gap-4 mb-6">
    <label class="flex flex-col">
      <span class="text-gray-700">Region</span>
      <select id="regionSelect" class="px-3 py-2 rounded border">
        <option value="all">All</option>
        <option value="North America">North America</option>
        <option value="Europe">Europe</option>
        <option value="Asia">Asia</option>
        <option value="Africa">Africa</option>
      </select>
    </label>
    <label class="flex flex-col">
      <span class="text-gray-700">Year</span>
      <select id="yearSelect" class="px-3 py-2 rounded border">
        <option value="2018">2018</option>
        <option value="2019">2019</option>
        <option value="2020">2020</option>
        <option value="2021">2021</option>
      </select>
    </label>
  </div>

  <!-- Chart grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <canvas id="lineChart"></canvas>
    <canvas id="pieChart"></canvas>
    <canvas id="barChart"></canvas>
    <canvas id="scatterChart"></canvas>
  </div>

  <script>
    // Sample data
    const data = {
      mobileAdoption: {
        'North America': [60, 70, 75, 80],
        'Europe': [50, 65, 70, 78],
        'Asia': [30, 50, 65, 72],
        'Africa': [10, 20, 30, 40],
      },
      techDistribution: {
        'North America': {2018: [50, 30, 20], 2019: [48, 32, 20], 2020: [46, 34, 20], 2021: [45, 35, 20]},
        'Europe': {2018: [40, 40, 20], 2019: [38, 42, 20], 2020: [35, 45, 20], 2021: [32, 48, 20]},
        'Asia': {2018: [30, 50, 20], 2019: [32, 48, 20], 2020: [35, 45, 20], 2021: [38, 42, 20]},
        'Africa': {2018: [20, 60, 20], 2019: [25, 55, 20], 2020: [30, 50, 20], 2021: [35, 45, 20]},
      },
      ageAdoption: {
        'North America': {
          2018: [80, 75, 60, 50, 30],
          2019: [85, 78, 65, 52, 33],
          2020: [88, 80, 70, 55, 35],
          2021: [90, 85, 72, 58, 40],
        },
        'Europe': {
          2018: [70, 65, 55, 45, 25],
          2019: [73, 68, 58, 47, 28],
          2020: [76, 70, 60, 49, 30],
          2021: [80, 75, 62, 52, 35],
        },
        'Asia': {
          2018: [50, 45, 40, 30, 15],
          2019: [55, 50, 43, 33, 18],
          2020: [60, 55, 45, 35, 20],
          2021: [65, 60, 48, 38, 22],
        },
        'Africa': {
          2018: [30, 25, 20, 15, 10],
          2019: [35, 28, 22, 18, 12],
          2020: [40, 30, 25, 20, 14],
          2021: [45, 35, 28, 22, 16],
        },
      },
      scatter: [
        {country: 'USA', region: 'North America', gdp: 60000, internet: 88},
        {country: 'Germany', region: 'Europe', gdp: 45000, internet: 85},
        {country: 'China', region: 'Asia', gdp: 10000, internet: 70},
        {country: 'India', region: 'Asia', gdp: 2000, internet: 45},
        {country: 'Nigeria', region: 'Africa', gdp: 1500, internet: 35},
      ]
    };

    const yearLabels = [2018, 2019, 2020, 2021];

    // Chart instances
    let lineChart, pieChart, barChart, scatterChart;

    function updateCharts() {
      const region = document.getElementById('regionSelect').value;
      const year = parseInt(document.getElementById('yearSelect').value);
      const yearIndex = yearLabels.indexOf(year);

      // LINE CHART
      const lineDatasets = region === 'all'
        ? Object.keys(data.mobileAdoption).map(r => ({
            label: r,
            data: data.mobileAdoption[r],
            borderWidth: 2,
          }))
        : [{
            label: region,
            data: data.mobileAdoption[region],
            borderWidth: 2,
            borderColor: 'blue',
          }];

      if (lineChart) lineChart.destroy();
      lineChart = new Chart(document.getElementById('lineChart'), {
        type: 'line',
        data: {
          labels: yearLabels,
          datasets: lineDatasets
        },
        options: { responsive: true }
      });

      // PIE CHART
      const pieData = region === 'all' ? [30, 40, 30] : data.techDistribution[region][year];
      if (pieChart) pieChart.destroy();
      pieChart = new Chart(document.getElementById('pieChart'), {
        type: 'pie',
        data: {
          labels: ['Smartphones', 'Laptops', 'Others'],
          datasets: [{ data: pieData, backgroundColor: ['#4F46E5', '#EC4899', '#10B981'] }]
        },
        options: { responsive: true }
      });

      // BAR CHART
      const ageData = data.ageAdoption[region][year];
      if (barChart) barChart.destroy();
      barChart = new Chart(document.getElementById('barChart'), {
        type: 'bar',
        data: {
          labels: ['18-24', '25-34', '35-44', '45-54', '55+'],
          datasets: [{
            label: `Adoption Rate`,
            data: ageData,
            backgroundColor: '#F59E0B'
          }]
        },
        options: { responsive: true }
      });

      // SCATTERPLOT
      const scatterData = region === 'all' ? data.scatter : data.scatter.filter(d => d.region === region);
      if (scatterChart) scatterChart.destroy();
      scatterChart = new Chart(document.getElementById('scatterChart'), {
        type: 'scatter',
        data: {
          datasets: [{
            label: 'Country GDP vs Internet Access',
            data: scatterData.map(d => ({ x: d.gdp, y: d.internet, label: d.country })),
            backgroundColor: '#6366F1'
          }]
        },
        options: {
          responsive: true,
          plugins: {
            tooltip: {
              callbacks: {
                label: context => `${context.raw.label}: GDP $${context.raw.x}, Internet ${context.raw.y}%`
              }
            }
          },
          scales: {
            x: { title: { display: true, text: 'GDP (USD)' } },
            y: { title: { display: true, text: 'Internet Access (%)' } }
          }
        }
      });
    }

    document.getElementById('regionSelect').addEventListener('change', updateCharts);
    document.getElementById('yearSelect').addEventListener('change', updateCharts);
    window.onload = updateCharts;
  </script>
</body>
</html>
